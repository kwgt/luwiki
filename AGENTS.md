# プロジェクト概要
このプロジェクトはローカル運用を目的とした軽量Wikiシステムを開発するプロジェクトです。

## 主な技術スタック
- サーバサイド
  - 採用言語: Rust
  - データベース: redb
  - シリアライザ基盤: serde
  - シリアライザ: MessagePack, JSON
  - 非同期制御: tokio
  - Webサーバ: ActixWeb
  - Markdown処理 : pulldown-cmark
  - 全文検索 : tantivy, lindera
- Webフロントエンド
  - 採用言語: TypeScript, HTML
  - リアクター: Vue3.js
  - CSSフレームワーク: Tailwind CSS + DaisyUI
  - HTMLテンプレート言語: Pug
  - Markdown変種 : Monaco Editor
  - Markdown変換 : markdown-it
  - スタイルツール: ESLint

---

## 仕様と参照文書について
関連ドキュメントは`docs`ディレクトリに格納しています。本書で参照を指示しているMarkdownファイルは、特に断りのない限り`docs`ディレクトリの物を指していると考えてください。

- このプロジェクトに関する要求仕様・機能定義・制約事項は、`REQUIREMENTS.md` に記載されています。  
- 基本設計に関しては `BASE_DESIGN.md` に記載されています。
- CLI仕様に関しては `CLI_SPECS.md` に記載されています。
- REST API仕様については `REST_API_SPECS.md` に記載されています。
- 本プロジェクトに固有の制約事項については `PROJECT_CONSTRAINTS.md` に記載されています。
- フロントエンドのUI仕様は `FRONTEND_UI_SPECS.md` に記載されています。
- マクロ仕様は `MACRO_SPECS.md` に記載されています。

---

## AIアシスタントおよび開発支援ツールの利用について
ChatGPT / Codex などの AI アシスタントを含む開発支援ツールの利用に関する一般ルールは `AI_ASSISTANT_RULES.md` に定義されています。

- コード生成・補完・自動修正を行う際は、同ドキュメントの規定に従うこと
- 環境依存やプロジェクト固有の制約については `PROJECT_CONSTRAINTS.md` を参照すること

---

## コード生成の注意・制約事項
設計・実装・提案・コード生成を行う際は、以下を遵守してください。

- 常に `REQUIREMENTS.md` の内容を前提とし、仕様に沿って検討すること
- 要求が曖昧、または仕様との整合性が取れない場合は、REQUIREMENTS.mdの該当箇所を参照し、必要に応じて確認すること
- 仕様と本ファイル（AGENTS.md）の間に矛盾がある場合は、`REQUIREMENTS.md` を優先すること
- REQUIREMENTS.md に記載されていない事項は、推測せず質問を行い確認すること
- 日本語でコメントを記述する際のエンコーディングはBOM無しのUTF-8を用いること
- 文字コードを変更するエディタ設定や変換ツールを使用しないこと（特に CP932/Shift-JIS への再保存禁止）
- 外部から貼り付ける際も UTF-8 (BOMなし) であることを確認すること
- 置換文字（�）が入っていないか、保存後に簡易チェック（rg '\ufffd' や grep）を行うこと。
- 既存ファイルのエンコーディングを変えない（新規追加・修正箇所だけ UTF-8/BOMなしを維持）
- 改行コードはLF文字のみにすること
- コメント記述種別の追加分けは以下の方針に則ること
  - 処理ステップを表すコメントはブロックコメントで記述すること
  - 処理に対する注釈はラインコメントで記述すること

※設計や内部構造に関する情報は、将来的に `ARCHITECTURE.md` に分離される可能性があります。

---

## コーディング規約
- Rustのコーディング規約は `CODING_RUST.md` に従ってください
- TypeScriptのコーディング規約は `CODING_TYPESCRIPT.md` に従ってください
- Vue3.jsのコーディング規約は `CODING_VUE3.md` に従ってください

---

## ディレクトリ構成
- src/ : ソースコード格納ディレクトリ
- data/ : 埋め込み用データ格納ディレクトリ
- tests/ : テストコード格納ディレクトリ
- docs/ : 要求仕様や設計資料を格納するディレクトリ（REQUIREMENTS.md / ARCHITECTURE.md など）
- frontend/ : フロントエンド実装に関するコード一式

---

## ChatGPT / Codexを用いた支援について
コード生成・リファクタリング・設計の検討を行う場合、以下を守ってください。

- 必ず REQUIREMENTS.md の仕様に基づいて設計・生成を行うこと
- コードを書き替える場合は、かならず先に変更内容を提示し説明してください。その内容を確認した上で指示を与えます。
- 仕様で禁止されている設計やライブラリを提案しないこと
- 不確実要素がある場合は推測せず、質問または選択肢を提示すること

AI アシスタント運用の共通ルールは `AI_ASSISTANT_RULES.md` を参照してください。
