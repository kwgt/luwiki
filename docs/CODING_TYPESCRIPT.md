# TypeScript におけるコーディング規約

## 基本事項
本プロジェクトの TypeScript コードは、可読性・保守性・静的解析性を重視します。  
TypeScript の型システムおよび ESLint を最大限活用することを前提とします。

フレームワーク・ライブラリ固有の記法（Vue / axios 等）については、
本規約に反しない範囲で公式の推奨に従ってください。

---
## コーディングスタイル

(Type ScriptDeep Dive 日本語版)[https://typescript-jp.gitbook.io/deep-dive/styleguide]のスタイルガイドを基本としてください。

---

## フォーマットおよび静的解析

- フォーマットは Prettier による自動整形を前提とする
- 静的解析には ESLint を使用する
- エディタ・IDE の自動整形設定を有効にすること

### インデント・表記
- インデントはスペース 2 個
- 行末に不要な空白を残さない
- ファイル末尾は必ず改行で終わること

---

## 命名規則

### 変数・関数
- camelCase を使用する
- 意味が明確になる名前を付与する
- 略語は一般的なもの（id, url など）のみに限定する

### クラス・型・インターフェース
- PascalCase を使用する
- 型を表す名前に動詞を含めない

### 定数
- `const` を使用する
- グローバルに近い定数は UPPER_SNAKE_CASE を使用してよい

---

## 型定義に関する方針

- `any` の使用は禁止とする
- 不定型データを扱う場合は `unknown` を使用し、型ガードを設けること
- 外部境界（API / JSON / 設定値）では明示的に型を指定する

### interface / type の使い分け
- オブジェクト構造の定義には `interface` を優先する
- Union 型や交差型が必要な場合は `type` を使用する

---

## エラー処理

- 例外（throw）による制御フローは最小限に留める
- 非同期処理では `try / catch` を用いて明示的にエラーを捕捉する
- エラーを握りつぶさず、呼び出し元に伝播させること

エラーの内容をユーザ向けに表示するかどうかは、UI 層で判断します。

---

## 非同期処理

- 非同期処理は `async / await` を使用する
- Promise チェーン（`.then()` の多用）は避ける
- 並列処理が必要な場合は `Promise.all` 等を明示的に使用する

--- 

## API 通信に関する規約
本プロジェクトにおける HTTP 通信は、原則として axios を使用します。
fetch API の直接利用は禁止します。

### axios の利用方針

- axios のインスタンスを作成し、それを通して通信を行う
- コンポーネント内で直接 axios.get() 等を呼び出さないこと

```ts
// api/client.ts
import axios from 'axios';

export const apiClient = axios.create({
  baseURL: '/api',
  timeout: 5000,
});
```

---

### API 呼び出しの責務分離

- API 通信処理は専用モジュールに集約する
- Vue コンポーネント内に直接通信処理を書かないこと

```ts
// api/items.ts
export async function fetchItems(): Promise<Item[]> {
  const res = await apiClient.get<Item[]>('/items');
  return res.data;
}
```

---

### 型安全性

- API レスポンスの型は必ず定義する
- any による受信は禁止
- 不定な JSON は明示的に変換・検証すること

---

### エラー処理（API）

- axios の例外は catch して整理する
- API モジュールでは UI 表示を行わない
- エラーは呼び出し元に伝播させること

---

### インターセプタ

- 認証情報付与や共通エラー処理は interceptor で行ってよい
- interceptor 内で UI 操作を行わないこと

---

## コメントおよびドキュメント

### コメント記述方針

- 処理の意図や背景を説明するコメントを記述する
- コードから自明な内容はコメントしない
- コメントは日本語で記述する

---

### JSDoc

- 公開関数・ユーティリティ・API 関数には JSDoc を記述する
- 引数・戻り値・副作用がある場合は明示する

---

## ビルド成果物に関する規約

- npm によるビルド成果物は単一の出力ディレクトリに集約する
- ビルド成果物には実行時に外部依存を持たせない
- 絶対パスを前提としたリソース参照を行わない

---

## その他

- 不要な依存関係を追加しないこと
- 型エラー・Lint エラーを放置しないこと
- 実装に迷う点がある場合は推測せず質問すること


