# AIによるアシスタントのルール

本ドキュメントでは、開発支援 AI（例：コード生成支援ツール、補完ツール、Codex CLI 等）を利用して本プロジェクトの開発を行う際の一般的な運用ルールを定義する。  
本書は **他プロジェクトでも再利用可能な汎用方針** を対象とし、特定環境・特定ツールチェイン等の制約は対象外とする。

プロジェクト固有の制限事項については `PROJECT_CONSTRAINTS.md` を参照すること。

---

## 1. 目的

- AI を用いたコード生成・修正の品質を一定以上に保つ  
- ビルド可能性を確認した上での提案を促す  
- 人間のレビューを補助しつつ、作業効率を高める  

---

## 2. AIアシスタントの基本方針

AI アシスタントは以下を満たすように動作すること。

- コード生成は「動作を意図したもの」であること
- 既存コードのスタイル・設計方針に可能な範囲で整合させること
- 重大な破壊的変更を提案する場合は理由を明示すること
- 不明点がある場合は推測で断定せず、質問を提示すること

---

## 3. ビルド確認に関する一般ルール

AI アシスタントがコード追加・修正を行う場合、次を必須とする。

1. コンパイル可否を確認できるコマンドの実行を前提とする  
2. 結果を確認し、成功・失敗を明示する  
3. 失敗した場合はエラー内容を示し、修正案を提示する  

具体的なビルドコマンドや環境条件はプロジェクト固有事項となるため `PROJECT_CONSTRAINTS.md` の規定に従うこと。

---

## 4. 「ビルド成功時の報告」に関するルール

以下の場合、AI アシスタントは明示的に報告すること。

- 以前発生していたビルドエラーが解消された場合
- 修正提案によりコンパイルが通るようになった場合
- 新たなコンパイルエラーが発生しなくなった場合

報告には最低限次を含める。

- 成功・失敗の別
- どのような修正で解消したかの概要
- 追加作業が必要な場合、その内容

---

## 5. コード修正提案に関するルール

AI アシスタントは次の方針に従って提案を行う。

- 単なる書き換えではなく、理由を明示する
- リファクタリングは「目的」「効果」を説明する
- 既存 API の互換性へ影響がある場合はその旨を明示する
- セキュリティ・安全性・保守性に関する改善は積極的に提示する

---

## 6. 環境に関する扱い

AI アシスタントは次を遵守する。

- 環境依存の操作（PATH変更・レジストリ変更等）を提案する際は理由を記載する
- 永続的な環境変更は、ユーザーの明示的許可なしに行わない
- 環境前提条件は必ず `PROJECT_CONSTRAINTS.md` を参照する

---

## 7. テストに関する一般ルール

- テストコードが存在する場合は実行を推奨する
- 新規機能追加時は可能な範囲でテスト追加を検討する
- 仕様に関する不明点はテストで仮定せず、質問を提示する

---

## 8. 禁止事項

AI アシスタントは次の行為を行ってはならない。

- ビルド未検証のコードを完成形として提示する
- 環境条件を無視したビルド前提を断定する
- 仕様が不明確な状態で重要設計判断を独断で行う
- 既存設計方針を大きく変更する提案を理由なく行う

---

## 9. 例外

- ユーザーが明示的に許可した場合
- プロジェクト固有文書で別途定義されている場合


